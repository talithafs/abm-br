package abm.agents;

import java.util.ArrayList;

import abm.Controller;
import abm.helpers.Utils;

public class UsedMachine extends Machine {

	private int usedCapacity ;
	private float usedWages ;
	private ArrayList<EmployedConsumer> operators ;
	
	public UsedMachine(int capacity, float maxWages, int usedCapacity, float usedWages) {
		super(capacity, maxWages);
		this.usedCapacity = usedCapacity;
		this.usedWages = usedWages;
		this.operators = new ArrayList<EmployedConsumer>();
	}

	public ArrayList<EmployedConsumer> getOperators() {
		return operators;
	}

	public void addOperator(EmployedConsumer operator) {
		this.operators.add(operator);
	}
	
	public void removeOperator(EmployedConsumer operator) {
		float wage = operator.getWage() ;
		float minWage = Controller.getInstance().getMinWage() ;
		float minWages = wage/minWage ;
		this.usedWages -= minWages ;
		this.usedCapacity = (int) ((this.capacity*this.usedWages)/this.maxWages) ; 
		this.operators.remove(operator);
	}

	public int getUsedCapacity() {
		return usedCapacity;
	}

	public void setUsedCapacity(int usedCapacity) {
		this.usedCapacity = usedCapacity;
	}

	public float getUsedWages() {
		return usedWages;
	}

	public void setUsedWages(int usedWages) {
		this.usedWages = usedWages;
	}
	
	@Override
	public String toString() {
		
		String strAgent = super.toString() ;
		
		Integer usedCapacity = this.usedCapacity ;
		Float usedWages = this.usedWages ;

		String[][] fields = { { "Used Capacity", usedCapacity.toString()}, 
							{"Used Wages", usedWages.toString()} } ;
		
	    return strAgent + Utils.getComponentDescriptor(fields, false) ;
	}
	
}
